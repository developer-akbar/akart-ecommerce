<sly data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html">
    <sly data-sly-call="${clientlib.all @ categories='akart.components.productslist'}" />

    <sly data-sly-set.queryParam="${request.requestParameterMap['productId'][0].toString}" />
    <sly data-sly-use.model="${'com.akart.ecommerce.core.models.ProductsListModel' @ queryParam=queryParam}" />

    <sly data-sly-test.prodMap="${model.productDetailsMap}">
        <div class="created-product-info">Product page
            <a href="${prodMap.productPath}">${prodMap.prodName}</a>
            has been created successfully with ID ${prodMap.prodId}
        </div>
    </sly>


    <sly data-sly-test.productList="${model.productList}" />

    <div class="content-wrapper flex">
        <div class="filters-wrapper">
            <h3 class="section-title margin-around">Filters</h3>
        </div>
    
        <div class="product-list-wrapper">
            <h3 class="section-title margin-around">${model.sectionHeading}</h3>
            <sly data-sly-list.productMap="${productList}">
                <div class="product flex">
                    <div class="product-image">
                        <div class="featured-image"
                            style="background-image: url('${productMap.prodImagePath @context='html'}');">
                        </div>
                    </div>
                    <div class="product-details">
                        <h3 class="product-name">${productMap.prodName}</h3>
                        <div class="price-details"> 
                            <span class="product-mrpprice currency-inr">${productMap.prodMrpPrice}</span>
                            <span class="product-price currency-inr">${productMap.prodPrice}</span>
                            <span class="product-offer">${productMap.prodOffer}% Off</span>
                            <span class="product-id" hidden>${productMap.prodId}</span>
                        </div>
                    </div>
                    <div class="action-buttons flex">
                        <sly data-sly-test="${model.isMiscAdminPage}">
                            <div class="admin-edit-product">
                                <button class="edit-product-button">Edit</button>
                            </div>
                            <div class="admin-delete-product">
                                <button class="delete-product-button">Delete</button>
                            </div>
                        </sly>
                        <sly data-sly-test="${!model.isMiscAdminPage}">
                            <span data-sly-test="${!productMap.isInStock}" class="item-outofstock">
                                Out of stock
                            </span>
                            <sly data-sly-test="${productMap.isInStock}">
                                <div class="edit-product">
                                    <button class="add-to-cart add-to-cart-button">${model.addToCartCTALabel}</button>
                                </div>
                                <div class="delete-product">
                                    <button class="buy-now-button">${model.buyNowCTALabel}</button>
                                </div>
                            </sly>
                        </sly>
                    </div>
                </div>
            </sly>
        </div>
    </div>
    


    <sly data-sly-use.template="core/wcm/components/commons/v1/templates.html"></sly>
    <sly data-sly-call="${template.placeholder @ isEmpty=true}"></sly>